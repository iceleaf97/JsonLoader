<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>connectome</title>
    <script src="js/three.min.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/MTLLoader.js"></script>
    <script src="js/OBJLoader.js"></script>
</head>
<body>

<script type="x-shader/x-vertex" id="vertexshader">

    attribute float alpha;

    varying float vAlpha;

    void main() {

        vAlpha = alpha;

        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

        gl_PointSize = 4.0;

        gl_Position = projectionMatrix * mvPosition;

    }

</script>

<script type="x-shader/x-fragment" id="fragmentshader">

    uniform vec3 color;

    varying float vAlpha;

    void main() {

        gl_FragColor = vec4( color, vAlpha );

    }

</script>
<script type="x-shader/x-vertex" id="vertexshader2">

    attribute float alpha;

    varying float vAlpha;

    void main() {

        vAlpha = alpha;

        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

        gl_PointSize = 10.0;

        gl_Position = projectionMatrix * mvPosition;

    }

</script>

<script type="x-shader/x-fragment" id="fragmentshader2">

    uniform vec3 color2;

    varying float vAlpha;

    void main() {

        gl_FragColor = vec4( color2, vAlpha );

    }

</script>
<script>
    // PointCloud with Custom, Dynamic Attribute

    var renderer, scene, camera, cloud, uniforms,mesh,control, ballmesh, ballPoint,testMesh;



    init();
    animate();

    function init() {

        // renderer
        renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );

        // scene
        scene = new THREE.Scene();

        //camera
        camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );
        camera.position.set(0,0,400);
        control = new THREE.OrbitControls(camera, renderer.domElement);
        control.target = new THREE.Vector3(0,0,0);
        control.update();

        // point cloud geometry

        var jsonLoader = new THREE.JSONLoader();
        jsonLoader.load('models/ball.json', addJsonToScn);
        function addJsonToScn(geometry) {
            var ball = new THREE.BufferGeometry().fromGeometry(geometry);
            console.log(ball.attributes.position.count);
            var mtl = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
            ballmesh = new THREE.Line(ball, mtl);
            console.log(ballmesh.geometry.attributes.position.count);
            scene.add(ballmesh);
        }
       document.addEventListener('click', rotateMesh, false);

    }

    function rotateMesh() {
        ballmesh.rotation.y += 0.1;
    }


    function animate() {
        if(ballmesh){
            ballmesh.rotation.y += 0.05;
        }

        requestAnimationFrame( animate );

        renderer.render( scene, camera );

    }


</script>

</body>
</html>